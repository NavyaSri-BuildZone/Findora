{% extends "base.html" %}
{% block title %}My Posts - Findora{% endblock %}

{% block content %}

<!-- Header -->
<div class="glass-card p-4 p-md-5 mb-4">
  <h2 class="fw-bold mb-1"><i class="bi bi-journal-text"></i> My Posts</h2>
  <p class="text-muted mb-0">Manage your Lost & Found posts âœ…</p>
</div>

<!-- Open Posts -->
<div class="glass-card p-4 p-md-5 mb-4">
  <h4 class="fw-bold mb-3">ðŸŸ£ Open Posts</h4>

  <div class="row g-4">
    {% for item in open_items %}
    <div class="col-md-6 col-lg-4">
      <div class="glass-card item-card p-4">

        <div class="d-flex gap-2 flex-wrap mb-2">
          {% if item.post_type == "lost" %}
            <span class="badge-soft badge-lost">ðŸ”´ LOST</span>
          {% else %}
            <span class="badge-soft badge-found">ðŸŸ¢ FOUND</span>
          {% endif %}

          {% if item.is_expensive %}
            <span class="badge-soft badge-expensive">ðŸ’Ž Expensive</span>
          {% endif %}
        </div>

        <h5 class="fw-bold mb-1">{{ item.title }}</h5>

        <p class="text-muted mb-3">
          <i class="bi bi-geo-alt"></i> {{ item.location }}
          &nbsp; â€¢ &nbsp;
          <i class="bi bi-tag"></i> {{ item.category }}
        </p>

        <div class="d-flex gap-2 flex-wrap">
          <a href="/item/{{ item.id }}" class="btn btn-outline-custom w-100">
            <i class="bi bi-eye"></i> View
          </a>

          <a href="/close-item/{{ item.id }}" class="btn btn-gradient w-100">
            <i class="bi bi-check2-circle"></i> Close
          </a>

          <a href="/delete-item/{{ item.id }}" class="btn btn-outline-custom w-100"
             onclick="return confirm('Delete this post permanently?');">
            <i class="bi bi-trash"></i> Delete
          </a>
        </div>

      </div>
    </div>
    {% endfor %}

    {% if open_items|length == 0 %}
    <div class="col-12">
      <div class="glass-card p-5 text-center" style="background: rgba(255,255,255,0.35);">
        <h5 class="fw-bold mb-1">No open posts ðŸ˜„</h5>
        <p class="text-muted mb-0">Your active posts will show here âœ…</p>
      </div>
    </div>
    {% endif %}
  </div>
</div>

<!-- Closed Posts -->
<div class="glass-card p-4 p-md-5">
  <h4 class="fw-bold mb-3">âœ… Closed / Returned / Archived</h4>

  <div class="row g-4">
    {% for item in closed_items %}
    <div class="col-md-6 col-lg-4">
      <div class="glass-card item-card p-4">

        <div class="d-flex gap-2 flex-wrap mb-2">
          {% if item.post_type == "lost" %}
            <span class="badge-soft badge-lost">ðŸ”´ LOST</span>
          {% else %}
            <span class="badge-soft badge-found">ðŸŸ¢ FOUND</span>
          {% endif %}

          {% if item.status != "open" %}
            <span class="badge-soft badge-found">âœ… Closed</span>
          {% endif %}
        </div>

        <h5 class="fw-bold mb-1">{{ item.title }}</h5>

        <p class="text-muted mb-3">
          <i class="bi bi-geo-alt"></i> {{ item.location }}
          &nbsp; â€¢ &nbsp;
          <i class="bi bi-tag"></i> {{ item.category }}
        </p>

        <a href="/item/{{ item.id }}" class="btn btn-outline-custom w-100">
          <i class="bi bi-eye"></i> View
        </a>

      </div>
    </div>
    {% endfor %}

    {% if closed_items|length == 0 %}
    <div class="col-12">
      <div class="glass-card p-5 text-center" style="background: rgba(255,255,255,0.35);">
        <h5 class="fw-bold mb-1">No closed posts yet âœ¨</h5>
        <p class="text-muted mb-0">Returned/archived posts will appear here âœ…</p>
      </div>
    </div>
    {% endif %}
  </div>
</div>

{% endblock %}

